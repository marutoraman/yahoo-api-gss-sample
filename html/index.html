<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>メルカリ販売管理ツール</title>
    <link rel="stylesheet" href="./style.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  </head>
  <body>
    
    <script type="text/javascript" src="/eel.js"></script>

    <div class="container">
      <nav class="navbar navbar-light ml-2" style="background-color:#EB423A">
        <a href="#" class="navbar-brand" style="color:white"><b>メルカリ販売管理ツール</b></a>
      </nav>
    <!--入力FORM start-->

        <div class="mt-3">
              <button type="button" id="updateStatus" class="btn btn-warning">出品ステータス更新</button>
              <!--タイトル-->
              <div class="card mt-1">
                <div class="card-title">
                  <h3 class="pl-2">出品・再出品</h3>
                </div>
                <div class="card-body">
                  <form class="form-inline">
                  <label for="interval_min_time" class="form-label">出品間隔</label>
                  <input type="text" id="interval_min_time" value="1">～<input
                     type="text" id="interval_max_time" value="5">分
                  <div class="mt-3">
                  <label for="interval_min_time" class="form-label">画像アップロード間隔</label>
                  <input type="text" id="image_upload_wait_time"
                    value="1">秒
                  </div>
                  <div class="mt-3">
                    <button type="button" id="sell" class="btn btn-primary">出品</button>
                    <button type="button" id="reSell" class="btn btn-danger">再出品</button>
                    <button type="button" id="importSyuppin" class="btn btn-secondary">出品中のデータの取得</button>                    
                  </div>
                  </form>
                </div>
              </div>
              
              <div class="card mt-1">
                <div class="card-title">
                  <h3 class="ml-2">値下げ</h3>
                </div>
                <div class="card-body">
                  <form class="form-group">
                    <label for="start_time_input" class="form-label">値下げ開始時間</label>
                    <input type="time" id="start_time_input">
                    <div class="mt-1">
                    <label for="priceDownYen" class="form-label">値下げ額(円)</label>
                    <input type="text" id="priceDownYen" value="100">円
                    </div>
                    <div class="mt-1">
                      <label for="priceDownMaxInterval" class="form-label">待ち時間(分)</label>
                      <input type="text" id="priceDownMinInterval" value="1">～<input type="text" id="priceDownMaxInterval" value="5">分
                    </div>
                    <div class="mt-3">
                    <button type="button" id="priceDown" class="btn btn-success">値下げ</button>
                    </div>
                    
                  </form>
                </div>
            </div>
          </div>
        </div>
    </div>

    <script type="text/javascript">
      sell.addEventListener("click", () => {
        eel.start(parseInt(interval_min_time.value),parseInt(interval_max_time.value),parseInt(image_upload_wait_time.value));
      });

      reSell.addEventListener("click", () => {
        eel.execute_sai_syuppin(parseInt(image_upload_wait_time.value));
      });

      importSyuppin.addEventListener("click", () => {
        eel.import_syuppin_item_to_sheet();
      });

      priceDown.addEventListener("click", () => {
        eel.execute_price_down_schedule_loop(start_time_input.value, parseInt(priceDownYen.value),
        parseInt(priceDownMinInterval.value),parseInt(priceDownMaxInterval.value));
      });

      updateStatus.addEventListener("click", () => {
        eel.update_syuppin_stat();
      });

      eel.expose(show_log);
      function show_log(log) {
        log_area.value += log + "\n";
      };

      eel.expose(add_option);
      function add_option(name) {
        let selector = document.getElementById("gss");
        let option = document.createElement("option");
        option.text = name;
        option.value = name;
        selector.add(option);
      };

      eel.expose(popup_alert);
      function popup_alert(text){
        alert(text);
      }

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
  </body>
</html>